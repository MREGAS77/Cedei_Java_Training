<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" template="template.xhtml">


    <ui:define name="content">
        <h:form>
            <table>
                <tr>
                    <th>
                        Last Name: <h:message for="lastnameInput"/>
                        <br/>

                        <h:inputText value="#{ownerController.lastname}" id="lastnameInput">
                            <f:ajax event="keyup" render="owners" execute="@this"/>
                        </h:inputText>
                    </th>
                </tr>
            </table>

            <h:dataTable value="#{ownerController.owners}" var="owner" id="owners">
                <h:column>
                    <f:facet name="header">Name</f:facet>
                    <h:commandLink action="#{ownerDetailsController.showOwner(owner)}" value="#{owner.firstName} #{owner.lastName}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Address</f:facet>
                    #{owner.address}
                </h:column>
                <h:column>
                    <f:facet name="header">City</f:facet>
                    #{owner.city}
                </h:column>
                <h:column>
                    <f:facet name="header">Telephone</f:facet>
                    #{owner.telephone}
                </h:column>
                <h:column>
                    <f:facet name="header">Pets</f:facet>
                    <ui:repeat value="#{owner.pets}" var="pet">
                        #{pet.name}
                    </ui:repeat>
                </h:column>
            </h:dataTable>

            <h:link outcome="addowner.xhtml" value="Add owner"/>
        </h:form>
    </ui:define>
</ui:composition>
